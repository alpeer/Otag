/* 2017 - 2018 ⊕ Otağ 2.0.0
 * https://otagjs.org
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.O={})}(this,function(exports){"use strict";function Sock(t){t=Object.assign({url:null,q:{},interval:3e3},"string"==typeof t?{url:t}:t||{}),t.q=Object.assign(t.q,t.socketio?{transport:"polling",EIO:3}:{_osid:O._uid(16)}),t.url=t.url||window.location.origin,t.socketio&&(t.url+="socket.io/");let e=/((ws|http)s?):\/\//g.exec(t.url);e?(e=e[1],"http"==e.substr(0,4)&&(t.url=(e.length>4?"wss://":"ws://")+t.url.split("://")[1])):t.url="wss://"+t.url,t.url+="?"+_queryString(t.q);let n,i,s,r={};return s={on(t,e){return t instanceof Object?Object.keys(t).forEach(e=>{r[e]=t[e]}):r[t]=e,this},connect(){return this.connected||(n=Object.assign(new WebSocket(t.url+"&_tstamp="+O.Time.now),{onopen(t){i.stop(),this.connected=1,r.open&&r.open(t.data)},lib:this,onmessage(t){t=t.data;let e=t.indexOf(","),n=t.substr(0,e);r[n]&&r[n](JSON.parse(t.substring(e+1)),this)},onclose(t){"error"==t.type&&r.error&&r.error(t),console.log("error",t),this.lib.connected=0,i.start()}}),n.onerror=n.onclose),this},emit(t,e){n.send(t+","+JSON.stringify(e))}},i=O.interval(s.connect,t.interval).start(),s.connect()}function req(t="",e,n){var i=new XMLHttpRequest;return t=t.indexOf("//")>-1?t:("string"!=typeof this?"./ep₺":this).vars({ep:t}),i.open(n?n.toUpperCase():e?"POST":"GET",t,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),new Promise(function(t,n){i.onreadystatechange=function(){if(4==this.readyState)if(200==this.status)if(""!=this.response){var e;try{e=JSON.parse(this.response)}catch(t){e=this.response}t(e)}else n({error:"empty response"});else n({error:{code:this.status}})},i.send(e?O._queryString(e):"")})}let _selector=function(t){let e=[],n=(t.match(/\[([0-9A-Za-z.-_şŞüÜöÖçÇİığĞ]+)="([0-9A-Za-z0-9,'.-_şŞüÜöÖçÇİığĞ#\(\):@ ]+)"\]/g)||[]).reduce((e,n)=>{return t=t.replace(n,""),n=n.match(/([0-9A-Za-z.şŞüÜöÖçÇİığĞ]+)="([0-9A-Za-z0-9,.-_şŞüÜöÖçÇİığĞ#\(\):@ ]+)/),e[n[1]]=n[2],e},{});t.indexOf(":")>-1&&(e=t.split(":"),t=e.shift());var i={class:/\.([0-9A-Za-z_\-şŞüÜöÖçÇİığĞ]+)/g,id:/#([0-9A-Za-z\-_şŞüÜöÖçÇİığĞ]+)/,ui:/[$|₺|₸|₼]([0-9A-Za-zşŞüÜöÖçÇİığĞ]+)/,tag:/^[a-zşüöçığ][a-zşüöçığ0-9]*?$/g};return i=Object.keys(i).reduce((e,n)=>{for(var s,r=[],o=-1,a=i[n];(s=a.exec(t))&&a.lastIndex!=o;){if(r.push(s[0]),o=a.lastIndex,!(e[n]instanceof Array)){e[n]=s[1]||s[0],t=t.replace(s[0],"");break}e[n].push(s[1])}return r.forEach(e=>{t=t.replace(e,"")}),e},{class:[],id:"",ui:null,tag:null}),i.args=e,i.attr=n,t.length&&(i.class=i.class.concat(t.split(" "))),i},proto={Element:{destroy(t=0,e=300){return new Promise(n=>{setTimeout(()=>{setTimeout(()=>{this.remove(),n()},e),this.Class("destroy")},t)})},disp(t){return t||this.hasOwnProperty("dispState")||(this.dispState=this.style.display),this.style.display=t?this.dispState:"none",this},class(t){if("function"==typeof t)this.class(t());else{let e={add:[],rem:[]};Object.keys(t).forEach(n=>{e[("function"==typeof t[n]?t[n]():t[n])?"add":"rem"].push(n)}),this.Class(e.rem,0).Class(e.add)}return this},Class(t,e=!0){return t instanceof Array||(t=[t]),t[0]&&""!=t[0]&&(this.className=t.reduce((t,n)=>{return t=t.replace(new RegExp("(\\b"+n+")+"),""),(e?t+" "+n:t).replace(/\s{2}/g," ").trim()},this.className),""==this.className.trim()&&this.removeAttribute("class")),this},do(t,e="click",n){return arguments[3]&&(n=O$1.toArray(arguments).splice(2)),this["on"+e]=(()=>{this.parent[t].apply(this.parent,n||[])}),this},append(t,e){return t&&(t instanceof Array||(t=[t]),e&&(t=t.reverse()),t.forEach(t=>this.appendChild(t.el))),this},set(t){return"string"==typeof t&&(this.innerHTML=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;")),this},pitch(t){return t.html&&(this.innerHTML=Disk[t.html]),this.innerHTML="",t?this.append.apply(this,arguments):this}},String:{kur(t={}){return new Sanal$$1(Object.assign(t,{_el:this}))},get(t){var e=O$1.toArray(document.querySelectorAll(this));return this.indexOf("#")>-1&&(t=0),null!=t&&(e=e[t]),e},val(t){let e=this.split(",").map(e=>{return t.val[e]});return 1==e.length?e[0]:e},vars(t){return t="object"==typeof t?t:arguments,Object.keys(t).reduce((e,n)=>{return e.replace(new RegExp("("+n+"[₺|$|₸|₼])+"),t[n])},this)},replaceAll(t,e){let n=this;for(var i in t)for(;n.indexOf(t[i])>-1;)n=n.replace(t[i],e[i]);return n},of(t){return"*"==this?t:this.split(",").reduce((e,n)=>{return e[n]=t[n]||null,e},{})},from(t){let e=("*"==this?Object.keys(t):this.split(",")).map(e=>t[e]);return this.indexOf(",")==-1&&"*"!=this?e[0]:e},obj(t,e){return this.split(",").reduce(e instanceof Array?(n,i,s)=>{return n[i]=t[s]||e[s],n}:(n,i,s)=>{return n[i]=t[s]||e,n},{})}},Function:{interval(t){let e,n=this;return{start(){return this.stop(),e=setInterval.apply(null,[n,t].concat(arguments)),this},stop(){return clearInterval(e),this}}},prom(t){let e=this.bind(t);return function(){let t=arguments;return new Promise((n,i)=>{try{var s=e.apply(null,t);s.then?s.then(n).catch(i):n(s)}catch(t){i(t)}})}},debounce(t){let e,n=this;return function(){let i=arguments;return clearTimeout(e),e=setTimeout(()=>{n.apply(n,i)},t),this}}},SVGElement:{set(t,e,n){return this.disp(0),O$1.req(t).then(t=>{let i=(new DOMParser).parseFromString(t,"text/xml").children[0];O$1.toArray(i.attributes).forEach(t=>this.setAttribute(t.name,t.value)),this.style.height=e,this.style.width=n,this.innerHTML=i.innerHTML,this.disp(1)}),this}},Image:{set(t,e){return e?(O$1.req(t).then(t=>this.innerHTML=t),this):(this.loader=new Promise((e,n)=>{Object.assign(this,{onload(){this.Class("loading",0),e()},onerror(){this.Class("loading",0).Class("error"),n()},src:t})}),this.Class("loading"))}}},props={String:{to:{set(t){this.el.to=t}},el:{get(){let t,e=_selector(this+"");return e.ui?(O$1.UI[e.ui]||console.error(e.ui,"is not defined"),t=O$1.UI[e.ui].apply(e.ui,e.args)):(t="svg"==e.tag?document.createElementNS("http://www.w3.org/2000/svg","svg"):document.createElement(e.tag||"div"),e.args.length&&t.set.apply(t,e.args)),Object.keys(e.attr).map(n=>t.setAttribute(n,e.attr[n])),e.id.length&&(t.id=e.id),e.class.length&&(t.className=e.class.join(" ")),t},set(t){let e=this.el;return["click","load"].forEach(n=>{delete t[n],t[n]&&(e["on"+n]=t[n])}),["prop","has","layout","resp","set","attr","valid"].forEach(n=>{t.hasOwnProperty()&&(e[n](t[n]),delete t[n])}),t.to&&("string"==typeof t.to?t.to.append(e):e.to=t.to,delete t.to),Object.assign(e,t),e}}},Element:{el:{get(){return this}},str:{get(){let t=["id","class"],e="DIV"!=this.tagName?this.tagName.toLowerCase():"";return e+=""!=this.id?"#"+this.id:"",e+=O$1.toArray(this.classList).map(t=>"."+t).join(""),O$1.toArray(this.attributes).forEach(n=>{t.indexOf(n.name)<0&&(n.value=n.value.replace("https:","").replace("http:",""),e+="["+n.name+'="'+n.value+'"]')}),e}},to:{set(t){"string"==typeof t?O$1.ready.then(()=>{t.get(0).pitch(this)}):(t instanceof Sanal$$1&&(t=t.el),t.pitch(this))}}},Function:{prevent:{get(){return t=>{t.preventDefault(),this(t)}}},stop:{get(){return t=>{t.stopPropagation(),this(t)}}},bounced:{get(){return this.debounce(100)}}},Image:{value:{get(){return this.src},set(t){return this.loader=new Promise((e,n)=>{this.prop({onload(){this.Class("loading",0),e()},onerror(){this.Class("loading",0).Class("error"),n()},src:t})}),this.Class("loading"),t}}}};(t=>{Object.keys(proto).filter(e=>t[e].prototype||t[e]).forEach(e=>Object.assign(t[e].prototype||t[e],proto[e])),Object.keys(props).filter(e=>t[e].prototype||t[e]).forEach(e=>Object.defineProperties(t[e].prototype||t[e],props[e])),Object.keys(proto.Element).forEach(e=>{t.Number.prototype[e]=t.String.prototype[e]=function(){let t=this.kur();return t[e].apply(t,arguments)}})})(window||global);let Time=new Proxy({interval(){let t,e=arguments;return{start(){return this.stop(),t=setInterval.apply(null,e),this},stop(){return clearInterval(t),this}}},rules:{yesterday:864e5,today:0,now:0,tomorrow:-864e5}},{get(t,e){if("interval"==e)return t[e];let n=new Date(+new Date-t.rules[e]);return"now"!=e&&["Hours","Minutes","Seconds"].map(t=>n["set"+t](0)),Math.floor(n.getTime()/1e3)}}),Chain=function(t){let e=this||null;return function(){let n=arguments;return e=this||e,new Promise(function(i,s){let r,o=t.shift().prom().apply(e,n);for(;r=t.shift();)o=o.then(r).catch(s);o.then(i).catch(s)})}};class Sanal$$1{constructor(t={_el:""}){Object.assign(this,t),t.ƒ&&Object.defineProperties(this,Object.keys(t.ƒ).reduce((e,n)=>{return e[n]={get:t.ƒ[n]},e},{})),this.has(this.View)}V(t=""){return t.split(":").reduce((t,e)=>t&&t.View?""==e?t.View:t.View[e]:null,this)}p(t){let e=this;for(;t--;)e=e.parent;return e}do(t,e){return this.click=(()=>this.parent[t]()),this}has(t){return t&&(Object.keys(t).forEach(e=>{"string"==typeof t[e]?t[e]=new Sanal$$1({_el:t[e]}):t[e]instanceof Sanal$$1||(t[e]=new Sanal$$1(t[e]))}),this.View=t),this}append(t){return this.content=t,this}set content(t){this.$content=t,this._el&&"string"!=typeof this._el&&(this._el.innerHTML="",this._el.append(t.map(t=>t.el)))}get content(){return this.$content}set to(t){this.el.to=t}get valid(){if(this.validate){if("function"==typeof this.validate)return this.validate(this.value);{let t;return!Object.keys(this.validate).some(e=>{return(t=this.validate[e])&&!("function"==typeof t?t(this.View[e].value):t.test(this.View[e].value))})}}return!0}set value(t){if(t instanceof Promise&&t.then(t=>{this.value=t}),this.bind){let e=[];this.bind.before&&e.push(this.bind.before),e=e.concat(Object.keys(t).map(e=>{let n=this.bind.model.el;return n.value={key:e,value:t[e],_model:this.bind.model},n})),this.bind.after&&e.push(this.bind.after),this.content=e}else this.View?(t._model&&(t=t.value),Object.keys(t).forEach(e=>{this.View[e]&&("string"==typeof this.View[e]?this.View[e]=this.View[e].split(":").shift()+":"+t[e]:this.View[e].value=t[e])})):this.el.set&&this.el.set(t);this.set&&this.set(t)}get el(){if("string"==typeof this._el){if(this._el=this._el.el,this._el.sanal=this,this.template?this.layout=this.template:this.content?this._el.append(this.content):this.View&&(this.has(this.View),this._el.append(O$1.toArray(this.View))),"string"==typeof this.bind&&(this.bind={model:this.bind}),this.fetch){let t;this.fetch.save&&(t=Disk[this.fetch.save])?this.value=t:O$1.req(this.fetch.from).then(t=>{this.fetch.shape&&(t=this.fetch.shape(t)),this.value=t,this.fetch.save&&(Disk[this.fetch.save]=t)})}["click","load","select"].filter(t=>this[t]).forEach(t=>this._el["on"+t]=this[t])}return this._el}set layout(t){this.el.innerHTML="";let e,n,i,s,r=this.el,o=r,a=this.View;t=t.split("\n").forEach(t=>{if(s=t.trim(),e=s.length){if(i=(t.length-e)/2,a&&a[s])s=a[s].el;else if(":"==s[0]){if(r instanceof Text&&n==i)return void(r.data+="<br>"+s.substring(1).trimLeft());s=document.createTextNode(s.substring(1).trimLeft())}else s=s.el;null!=n&&i!=n&&(o=i>n?r:o.p),o.appendChild(s),r=s,s.p=o,n=i}})}}var none={_el:"Bulunamadı",name:"Bulunamadı",template:`
    center
      h1:Bet Bulunamadı
      p:Aradığınız bet bulunamadı`};class Page$$1{constructor(t={}){t=Object.assign({routes:{},none:none,handler:"body"},t),t.routes.none=t.none,this.handler=t.handler;let e=this.routes=t.routes;Object.keys(e).filter(t=>"string"!=typeof e[t]).map(t=>{return e[t]instanceof Sanal$$1||(e[t]=new Sanal$$1(e[t])),e[t].name||(e[t].name=t),e[t]._name=e[t].name,Object.defineProperty(e[t],"name",{get:()=>{return e[t]._name},set:n=>{this.title(n),this.Nav.value={[t]:n},e[t]._name=n}}),e[t]}),O$1.ready.then(()=>{this.route(),window.onpopstate=this.route.bind(this)})}title(t){this._title&&(t=this._title.vars({title:t})),document.title=t}route(t){let e=0;t||(t=decodeURI(location.hash)),t instanceof Object&&!(t instanceof Array)&&(e=t.type&&"pushstate"==t.type,t=t.state||decodeURI(location.hash));var n=t.split("/");if("#"==n[0]&&n.shift(),""==n[0]&&this.routes.index)return this.route("index");let i,s=n.shift();if((i=this.routes[s])||(s="none",i=this.routes.none),"string"==typeof i)return this.route(i);if("function"==typeof i&&i.apply(null,n),i instanceof Sanal$$1){let t=this.page!=s;if(this.page=s,this.handler){let e=e=>{this.handler.handle?this.handler.handle(e,t):t&&this.handler.pitch(e)};"function"==typeof this.handler?this.handler(i):"string"==typeof this.handler?i.to=this.handler:e(i)}i.once?(i.once.apply(i,n),delete i.once):i.wake&&i.wake.apply(i,n)}e||window.history[(e?"push":"replace")+"State"](t,null,t.indexOf("#")==-1?"#/"+t:t)}Navigation(t={}){t=Object.assign({hide:[]},t),t.hide.push("none");let e=this.Nav="Nav".kur({View:Object.keys(this.routes).filter(e=>"string"!=typeof this.routes[e]&&t.hide.indexOf(e)==-1).reduce((t,e)=>{return t[e]='a[href="/#/'+e+'"]',t},{})});return e.value=Object.keys(e.View).reduce((t,e)=>{return t[e]=this.routes[e].name,t},{}),e}set page(t){this._page!=t&&(this.now=this.routes[t],this._page=t)}get page(){return this._page}set now(t){this.now&&this.now.idle&&this.now.idle();let{name:name}=t;this.title(name),this._now=t}get now(){return this._now}}var Tor={Sock:Sock,req:req};let _queryString=t=>{let e=arguments[1];var n=[];for(var i in t)if(t.hasOwnProperty(i)){var s=e?e+"["+i+"]":i,r=t[i];n.push("object"==typeof r?_queryString(r,s):encodeURIComponent(s)+"="+encodeURIComponent(r))}return n.join("&")},Disk=new Proxy({expire:function(t,e){Disk[t+":expire"]=Math.floor(+new Date/1e3)+Number(e)},rem:t=>{"string"==typeof t&&(t=[t]),t.forEach(t=>{localStorage.removeItem(t)})}},{get:(t,e)=>{if(t[e])return t[e];let n;if((n=localStorage.getItem(e+":expire"))&&Number(n)<Math.floor(+new Date/1e3))return delete Disk[e],null;e=localStorage.getItem(e);try{return JSON.parse(e)}catch(t){return e}},set:(t,e,n)=>{return localStorage.setItem(e,JSON.stringify(n)),!0},deleteProperty:(t,e)=>{return localStorage.removeItem(e),!0},has:(t,e)=>{return!!localStorage[e]}}),O$1={require(js,path=""){return Tor.req(path+js+".js").then(code=>{let module={};return eval(code),module.exports})},define(t,e){this[t]||(this[t]={}),Object.keys(e).forEach(n=>{this[t][n]=e[n]})},UI:{M(){let t=O$1.toArray(arguments);return O$1.Model[t.shift()].apply("",t)}},req:Tor.req,Model:{},toArray:t=>Object.keys(t).map(e=>t[e]),ready:new Promise(t=>{document.addEventListener("DOMContentLoaded",()=>{let{body:body,head:head}=document;t({body:body,head:head})})})};exports.default=O$1,exports.Time=Time,exports.Chain=Chain,exports.Tor=Tor,exports.Page=Page$$1,exports.Disk=Disk,exports.Sanal=Sanal$$1,exports.O=O$1,Object.defineProperty(exports,"__esModule",{value:!0})});